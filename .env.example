# 微信公众号 MCP 服务器环境变量配置示例
# 复制此文件为 .env 并填入实际配置值
# 
# 参数说明：
# 🔥 = 必需参数    ⚙️ = 可选参数    📋 = 预留参数（当前版本未使用）
# 最小配置只需要：MCP_TRANSPORT, WECHAT_APP_ID, WECHAT_APP_SECRET
# ============================================
# 🔥 MCP基础配置（必需）
# ============================================
MCP_ENABLE=true        # 是否启用MCP服务（可选，默认True）
MCP_TRANSPORT=http      # 传输协议选择：stdio/http/sse
MCP_HOST=0.0.0.0       # Web服务器绑定地址（可选，有默认值）
MCP_PORT=3003          # Web服务器端口（可选，有默认值）
# ============================================
# ⚙️ Web服务器/消息服务配置（必需）
# ============================================
# 端口配置
# - 开发环境: 3003
# - 生产环境: 80 (HTTP) 或 443 (HTTPS)
WECHAT_MSG_SERVER_ENABLE=true  # 是否启用微信消息服务（可选，默认True）
WECHAT_MSG_SERVER_PORT=80   # 📋 服务器端口
WECHAT_MSG_SERVER_HOST=0.0.0.0  # 📋 监听地址
WECHAT_MSG_CONTEXT_PATH=/wechat-oa # 静态网页服务上下文路径（可选，默认/）
WECHAT_MSG_AI_TIMEOUT=15                      # 公众号接口回复超时（秒），微信是1请求+3重试机制，每次重试间隔5秒，因此最多20秒
WECHAT_MSG_AI_TIMEOUT_PROMPT='<a href="https://host">传输门</a>' # 流式模式超时提示语
WECHAT_MSG_AI_LEN_LIMIT=600                   # 公众号接口AI回复长度限制（字符数）
WECHAT_MSG_AI_CACHE_TIME=60                   # 公众号接口AI回复缓存时间（秒）
WECHAT_MSG_AI_CACHE_SIZE=100                  # 公众号接口AI回复缓存大小（条）
WECHAT_OFFICIAL_API_URL=https://api.weixin.qq.com  # 微信服务端API基础URL

# ============================================
# 🤖 OpenAI AI服务配置（AI智能聊天功能）
# ============================================
OPENAI_API_URL=https://api.openai.com/v1    # OpenAI API基础URL
OPENAI_API_KEY=your_openai_api_key          # OpenAI API密钥
OPENAI_MODEL=gpt-3.5-turbo                  # OpenAI模型选择
OPENAI_MAX_TOKENS=16000                     # 最大token数量
OPENAI_TEMPERATURE=0.8                      # 回复创造性（0.0-2.0）
OPENAI_TIMEOUT=300                          # API超时时间（秒）
OPENAI_INTERACTION_MODE=stream              # AI交互模式：stream（流式）或block（阻塞）
OPENAI_PROMPT="你是一个专业的热点资讯分析师，专注于实时追踪、深度解析和前瞻预测全球范围内的热点新闻事件。你的核心使命是帮助用户快速理解事件背景、关键动因、潜在影响与发展趋势"

# 📱 公众号问答AI配置（微信公众号回复使用）
OPENAI_WECHAT_API_URL=https://api.openai.com/v1
OPENAI_WECHAT_API_KEY=your_openai_api_key    # 公众号问答API密钥
OPENAI_WECHAT_MODEL=gpt-5-nano            # 公众号问答模型选择
OPENAI_WECHAT_MAX_TOKENS=4096                 # 公众号问答最大token数量
OPENAI_WECHAT_TEMPERATURE=0.7                 # 公众号问答回复创造性（0.0-2.0）
OPENAI_WECHAT_TIMEOUT=300                     # 公众号问答API超时时间（秒）
OPENAI_WECHAT_INTERACTION_MODE=stream         # 公众号问答AI交互模式：stream（流式）或block（阻塞）
OPENAI_WECHAT_PROMPT="你是一个专业的热点资讯分析师，专注于实时追踪、深度解析和前瞻预测全球范围内的热点新闻事件。核心任务是简洁快速回复公众号用户的问题，帮用户快速理解事件背景、关键动因、潜在影响与发展趋势。"

# 🔐 聊天界面配置密码（用于保护配置功）
OPENAI_CONFIG_PASSWORD=your_config_password_here  # 聊天界面配置密码（用于保护配置功能）
OPENAI_VERIFICATION_CODE_CLEANUP_CRON=30 0 * * *  # 关注公众号申请验证码，定时清理过期验证码Cron表达式（可选，如：30 0 * * *）
OPENAI_VERIFICATION_CODE_VALID_DAYS=90            # 验证码有效天数（默认90天）
# ============================================
# 🔥 微信公众号基础配置
# ============================================
WECHAT_APP_ID=your_app_id           # 🔥 微信公众号AppID（必需）
WECHAT_APP_SECRET=your_app_secret   # 🔥 微信公众号AppSecret（必需）
WECHAT_OFFICIAL_ACCOUNT_NAME=AI析数助手  # 微信公众号名称（可选，默认AI析数助手）
# ============================================
# 🔥 微信公众号【消息推送】配置
# ============================================
WECHAT_TOKEN=your_wechat_token      # 🔥 微信服务【消息推送】验证Token（必需）
WECHAT_ENCODING_AES_KEY=your_encoding_aes_key  # 📋 消息加解密密钥【消息推送】（预留：当前版本未使用）
# ============================================
# ⚙️ 存储配置（可选）
# ============================================
# 远程存储配置（S3兼容存储服务）
STORAGE_REMOTE_ENABLE=false        # 是否启用远程存储（可选，默认false）
STORAGE_S3_ENDPOINT=               # S3兼容存储服务端点URL（如：https://s3.amazonaws.com）
STORAGE_S3_ACCESS_KEY=             # S3访问密钥
STORAGE_S3_SECRET_KEY=             # S3密钥
STORAGE_S3_BUCKET=                 # S3存储桶名称
STORAGE_S3_REGION=                 # S3区域（可选，部分S3需要填写）
STORAGE_S3_PATH_PREFIX=            # S3路径前缀（可选，默认无）
STORAGE_S3_READ_ONLY=true          # 是否只读（可选，默认false）
STORAGE_S3_WRITE_ENABLED=false     # 是否可写（可选，默认false）
STORAGE_SYN_CRON=                  # 定时同步Cron表达式（可选，如：0 0 * * *）
STORAGE_SYN_OVERRIDE=false         # 同步时是否覆盖本地文件（可选，默认false）
# ============================================
# Docker 网络模式配置
# - bridge: 桥接模式（默认），适用于开发环境，使用端口映射
# - host: 主机网络模式，适用于生产环境 80/443 端口，直接使用主机网络
NETWORK_MODE=bridge       # 📋 Docker 网络模式：bridge 或 host



# ============================================
# 📋 HTTPS配置（预留：当前版本未使用）
# ============================================
WECHAT_SSL_CERT=/app/ssl/cert.pem    # 📋 SSL证书路径
WECHAT_SSL_KEY=/app/ssl/key.pem      # 📋 SSL私钥路径