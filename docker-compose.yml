# Docker Compose 配置 - MCP 服务器
# 
# 使用方式：
# docker compose up -d
# 
# 配置说明：
# - 在 .env 文件中配置微信公众号相关环境变量
# - MCP 服务器通过 stdio 与客户端通信，不需要暴露端口

services:
  # MCP 服务器
  wechat-mcp:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: wechat_mcp_server
    restart: unless-stopped
    volumes:
      - ./data:/app/data  # 持久化数据（SQLite 数据库）
    environment:
      - WECHAT_APP_ID=${WECHAT_APP_ID}
      - WECHAT_APP_SECRET=${WECHAT_APP_SECRET}
    command: python main.py
    stdin_open: true
    tty: true
